## ğŸƒÂ í…ŒìŠ¤íŠ¸ì½”ë“œ ì—°ìŠµ

> TDD ë² ì´ìŠ¤ì˜ ì½”ë“œ ì‘ì„± ì—°ìŠµ
> 

---

### âœ…Â ìš”êµ¬ì‚¬í•­

- ë‹¨ìˆœ ë¹„ë°€ë²ˆí˜¸ë¥¼ ê²€ì¦í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€
- ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ 12ì ì´í•˜ì—¬ì•¼ í•œë‹¤.
- ë¹„ë°€ë²ˆí˜¸ê°€ 8ì ë¯¸ë§Œ ë˜ëŠ” 12ì ì´ˆê³¼ì¸ ê²½ìš° *IllegalArgumentException* ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.

### âœ…Â ì½”ë“œì‘ì„±

> `PasswordValidator` : ë¹„ë°€ë²ˆí˜¸ ê²€ì¦
> 

*PasswordValidatorTest.class*

```java
public class PasswordValidatorTest {

    @DisplayName("ë¹„ë°€ë²ˆí˜¸ê°€ ìµœì†Œ 8ì ì´ìƒ, 12ì ì´í•˜ë©´ ì˜ˆì™¸ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.")
    @Test
    void validatePasswordTest() {
    
        String password = "abcdefghij";
        PasswordValidator passwordValidator = new PasswordValidator();

        assertThatCode(() -> passwordValidator.validate(password))
                .doesNotThrowAnyException();
    }

    @DisplayName("ë¹„ë°€ë²ˆí˜¸ê°€ 8ì ë¯¸ë§Œ ë˜ëŠ” 12ì ì´ˆê³¼í•˜ëŠ” ê²½ìš° IllegalArgumentException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.")
    @Test
    void invalidatePasswordTest() {
      
        assertThatCode(() -> passwordValidator.validate("abc"))
                .isInstanceOf(IllegalArgumentException.class)
                .hasMessage("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ 12ì ì´í•˜ì—¬ì•¼ í•œë‹¤.");
    }
    
}

```

ìœ„ ì‘ì„±í•œ ì½”ë“œëŠ” ê²½ê³„ ê°’ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.

ê¸¸ì´ê°€ ê°ê° 7, 13ì¸ ê°’ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ”ë°, ì–´ë…¸í…Œì´ì…˜ì„ í™œìš©í•˜ì—¬ ì‰½ê²Œ ì‘ì„±í•  ìˆ˜ ìˆë‹¤.

```java
    @DisplayName("ë¹„ë°€ë²ˆí˜¸ê°€ 8ì ë¯¸ë§Œ ë˜ëŠ” 12ì ì´ˆê³¼í•˜ëŠ” ê²½ìš° IllegalArgumentException ì˜ˆì™¸ê°€ ë°œìƒí•œë‹¤.")
    @ParameterizedTest
    @ValueSource(strings = {"aabbcce", "aabbccddeeffg"})
    void invalidatePasswordTest(String value) {

        assertThatCode(() -> passwordValidator.validate(value))
                .isInstanceOf(IllegalArgumentException.class)
                .hasMessage("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ 12ì ì´í•˜ì—¬ì•¼ í•œë‹¤.");
    }
```

> [https://www.baeldung.com/parameterized-tests-junit-](https://www.baeldung.com/parameterized-tests-junit-5)5
> 

*PasswordValidator.class*

```java

public class PasswordValidator {

    public void validate(String password) {
        int length = password.length();

        if (length < 8 || length > 12) {
            throw new IllegalArgumentException("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ 12ì ì´í•˜ì—¬ì•¼ í•œë‹¤.");
        }
    }
}
```

---

### âœ…Â ìš”êµ¬ì‚¬í•­ ì¶”ê°€

- ëœë¤ ë¬¸ìì—´ ìƒì„±ìœ¼ë¡œ ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì„±í•˜ë„ë¡ ìˆ˜ì •
- ë¹„ë°€ë²ˆí˜¸ë¥¼ ìµœì´ˆ ìƒì„±(ì´ˆê¸°í™”)í•˜ëŠ” í´ë˜ìŠ¤ ì¶”ê°€

### âœ…Â ì½”ë“œì‘ì„±

> `RandomPasswordGenerator` : ëœë¤ ë¬¸ìì—´ ìƒì„±
> 

> `User` : ë¹„ë°€ë²ˆí˜¸ ìµœì´ˆ ìƒì„± ì—­í• 
> 

*RandomPasswordGenerator.class*

```java
// ê¸¸ì´ì™€ ê°’ì„ ëœë¤í•˜ê²Œ ìƒì„±í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ê³  ê°€ì •í•¨
public class RandomPasswordGenerator {

	public String generatePassword() { ... }
}
```

*User.class*

```java

public class User {
    private String password;

    public void initPassword() {
        RandomPasswordGenerator randomPasswordGenerator = new RandomPasswordGenerator();
        String randomPassword = randomPasswordGenerator.generatePassword();

        if(randomPassword.length() >= 8 && randomPassword.length() <= 12) {
            this.password = randomPassword;
        }
    }

    public String getPassword() {
        return password;
    }
}

```

*UserTest.class*

```java
public class UserTest {

    @DisplayName("ë¹„ë°€ë²ˆí˜¸ë¥¼ ì´ˆê¸°í™”í•œë‹¤.")
    @Test
    void passwordInitTest() {
        // given
        User user = new User();

        // when
        user.initPassword();

        // then
        assertThat(user.getPassword()).isNotNull();
    }
}
```

> ëœë¤í•˜ê²Œ ë¹„ë°€ë²ˆí˜¸ ê°’ì´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ì´ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” pass/failì´ í™•ë¥ ì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ê²Œ ë  ê²ƒì´ë‹¤.
> 

### ğŸ¤”Â ì–´ë–»ê²Œ í•´ì•¼ pass, failì˜ ê²½ìš°ì˜ í…ŒìŠ¤íŠ¸ë¥¼ ìœ ë‹› í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ì‘ì„±í•˜ë©´ì„œ ê²°í•©ë„ê°€ ë„ˆë¬´ ë†’ì§€ ì•Šê²Œ í•  ìˆ˜ ìˆì„ê¹Œ?

*User.class*

```java

public class User {
    private String password;

    public void initPassword() {
        RandomPasswordGenerator randomPasswordGenerator = new RandomPasswordGenerator();
        String randomPassword = randomPasswordGenerator.generatePassword();

        if(randomPassword.length() >= 8 && randomPassword.length() <= 12) {
            this.password = randomPassword;
        }
    }

    public String getPassword() {
        return password;
    }
}

```

> í•´ë‹¹ ë¼ì¸ì—ì„œ ìƒì„±ë˜ëŠ” ê²°ê³¼ë¥¼ ì§ì ‘ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
> 

ë”°ë¼ì„œ ì´ ë¶€ë¶„ì„ ì»¨íŠ¸ë¡¤ ê°€ëŠ¥í•˜ê²Œë” ì½”ë“œë¥¼ ìˆ˜ì •í•œë‹¤.

*PasswordGeneratePolicy.interface*

```java
public interface PasswordGeneratePolicy {
    String generatePassword();
}
```

> ë¹„ë°€ë²ˆí˜¸ ìƒì„± í´ë˜ìŠ¤ ìƒìœ„ì— ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‘¬ì„œ ê²°í•©ì„ ëŠìŠ¨í•˜ê²Œ í•  ëª©ì 
> 

*RandomPasswordGenerator.class*

```java
// ê¸¸ì´ì™€ ê°’ì„ ëœë¤í•˜ê²Œ ìƒì„±í•˜ëŠ” ë¡œì§ì´ ìˆë‹¤ê³  ê°€ì •í•¨
public class RandomPasswordGenerator implements PasswordGeneratePolicy{

	@Override
	public String generatePassword() { ... }
}
```

*User.class*

```java

public class User {
    private String password;

    public void initPassword(PasswordGeneratorPolicy passwordGeneratorPolicy) {
		    // ì‚­ì œ
        // RandomPasswordGenerator randomPasswordGenerator = new RandomPasswordGenerator();   
        String randomPassword = passwordGeneratorPolicy.generatePassword();

        if(randomPassword.length() >= 8 && randomPassword.length() <= 12) {
            this.password = randomPassword;
        }
    }

    public String getPassword() {
        return password;
    }
}

```

> ë¬¸ì œê°€ ëë˜ ë¼ì¸ì„ ì§€ìš°ê³ , ì»¨íŠ¸ë¡¤ ë¶ˆê°€ëŠ¥í•œ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ë¥¼ ì™¸ë¶€ë¡œë¶€í„° ì£¼ì…ë°›ë„ë¡ ìˆ˜ì • â†’ ê²°í•©ë„ ê°ì†Œ
> 

`initPassword` ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë°›ì•„ì„œ ê·¸ ê²°ê³¼ë¡œ validateë¥¼ ì§„í–‰í•˜ê²Œ í–ˆìœ¼ë¯€ë¡œ íŒŒë¼ë¯¸í„°ë¥¼ ì»¨íŠ¸ë¡¤í•´ì£¼ë©´ ëœë‹¤.

*UserTest.class*

```java
public class UserTest {

    @DisplayName("ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”ì— ì„±ê³µí•œë‹¤.")
    @Test
    void validPasswordInitTest() {
        // given
        User user = new User();

        // when
        user.initPassword(new ValidPasswordGenerator());

        // then
        assertThat(user.getPassword()).isNotNull();
    }
    
    @DisplayName("ë¹„ë°€ë²ˆí˜¸ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í•œë‹¤.")
    @Test
    void wrongPasswordInitTest() {
        // given
        User user = new User();
        
        // user.initPassword(new WrongPasswordGenerator());

        // when, then
        assertThatThrownBy(() -> user.initPassword(new WrongPasswordGenerator()))
            .isInstanceOf(IllegalArgumentException.class)
            .hasMessage("ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒ 12ì ì´í•˜ì—¬ì•¼ í•œë‹¤.");
    }
}
```

> ìš´ì˜ ë¡œì§ì—ì„œëŠ” ëœë¤í•˜ê²Œ ë¹„ë°€ë²ˆí˜¸ê°€ ì „ë‹¬ì´ ë˜ì—ˆì§€ë§Œ, í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œëŠ” ì§ì ‘ êµ¬ë¶„ì§€ì–´ ì „ë‹¬í•˜ì—¬ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤.
> 

---

### ğŸ’£Â ê²°ë¡ 

í…ŒìŠ¤íŠ¸ í•˜ê¸° ì‰½ê²Œ ì½”ë“œë¥¼ ì‘ì„±í•˜ë‹¤ ë³´ë‹ˆ ê²°í•©ë„ê°€ ê°•í•´ì§€ì§€ ì•Šê²Œë” ì„¤ê³„ê°€ ê°€ëŠ¥í•˜ì˜€ë‹¤.

[Humble Object Pattern](https://www.notion.so/Humble-Object-Pattern-1bc1f679d4cb805090bfedfcfece0734?pvs=21)
